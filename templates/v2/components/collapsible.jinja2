{% extends "v2/layouts/inner.jinja2" %}

{% block body_attrs %}class="grey-bg" data-init-sections="collapsible"{% endblock body_attrs %}

{% macro collapsible_block(title, id, open=false) %}
  <div class="collapsible">
    <div class="card _qa mb-4">
      <button class="btn card__header" id="collapsible-block-{{ id }}"
              aria-expanded="{% if open %}true{% else %}false{% endif %}" href="#collapsible-block-{{ id }}__inner">
        {{ macros.svg_icon('border-arrow-right') }}{{ title|safe }}
      </button>
      <div class="{% if not open %}collapse{% endif %} pb-4" id="collapsible-block-{{ id }}__inner" aria-expanded="{% if open %}true{% else %}false{% endif %}">
        <div class="card__content">
          {{ caller() }}
        </div>
      </div>
    </div>
  </div>
{%- endmacro %}


{% macro collapsible_meta_course(title, course_slug, description, base_url='https://compscicenter.ru') %}
  {% call collapsible_block(title, course_slug) %}
    {{ description|safe }}
    <a href="{{ base_url }}/courses/{{ course_slug }}/" class="btn _outline _gray _small" target="_blank">Страница курса</a>
  {% endcall %}
{%- endmacro %}


{% block content %}
    <div class="container page-content">
        <div class="row">
            <div class="col-lg-12">
                <h1>Collapsible Block</h1>
                {% call collapsible_block('Название блока', 'unique-id') %}
                  <h3>Hello World</h3>
                  <p>Hidden description</p>
                {% endcall %}

                {% call collapsible_block('Opened Block', 'unique-id', open=true) %}
                  <h3>Hello World</h3>
                  <p>Visible description</p>
                {% endcall %}

                <h2 class="mt-10">Collapsible Course</h2>
                {{ collapsible_meta_course('Название&nbsp;курса', 'algo1', '<p>Текстовое описание курса</p>') }}
            </div>
        </div>
    </div>
{% endblock content %}
