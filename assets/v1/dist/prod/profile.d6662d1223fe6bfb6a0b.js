/*! For license information please see profile.d6662d1223fe6bfb6a0b.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[845],{78106:function(t,e,i){"use strict";i.r(e),i.d(e,{launch:function(){return d}});i(34769),i(34115),i(95342),i(68625),i(1939),i(62775),i(76555),i(95094);var n=i(56666),a=(i(43105),i(15735),i(58188),i(73439),i(28673),i(6886),i(77950),i(21850),i(39529),i(31235),i(86563)),r=i(95307),o=i.n(r),s=i(88744);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,n.Z)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={minWidth:250,minHeight:350,maxFileSize:3,minThumbWidth:170,minThumbHeight:238,mimeTypes:["image/jpeg","image/png"]};var u=(0,s.Z)((function(){var t=$('input[name="confirmation-email"]').val();if(t.length>0){var e=Object.assign({},window.emailVerificationData);$.ajax({type:"POST",url:"/api/admission/confirmation/verify-email",data:c(c({},e),{},{email:t}),dataType:"json"}).done((function(t){(0,a.sc)("Код был отправлен на указанный email.","info")})).fail((function(t,e,i){(0,a.sc)("Email не был отправлен.","error")}))}}),1e3,{leading:!0,trailing:!1});function d(){Promise.all([i.e(304),i.e(426)]).then(i.bind(i,59426)).then((function(t){t.initDatePickers()})).catch((function(t){return(0,a.Wd)(t)}));var t=document.querySelector("input[name=confirmation-photo]");o().event.on(t,"change",(function(e){t.closest(".form-group").classList.remove("has-error");var i=o().getFiles(e);o().filterFiles(i,(function(t,e){if(/^image/.test(t.type)){var i=l.mimeTypes.includes(t.type),n=e.width>=l.minWidth&&e.height>=l.minHeight,a=t.size<l.maxFileSize*o().MB;return i&&n&&a}return!1}),(function(e,i){0===e.length&&i.length>0&&t.closest(".form-group").classList.add("has-error")}))})),$("#confirm-email").click(u)}},40353:function(t,e,i){"use strict";i.r(e),i.d(e,{launch:function(){return P}});var n=i(34795),a=i(77162),r=i.n(a),o=(i(77950),i(21850),i(49228),i(58188),i(43105),i(1939),i(27233),i(28673),i(41131)),s=i.n(o),h=i(65311),c=i.n(h),l=i(95307),u=i.n(l),d=i(88744),p=i(86563),f=window.__CSC__.photoApp,m={upload:(0,p.t4)("templateUpload"),thumb:(0,p.t4)("templateThumb")},g="Неизвестная ошибка.",v="Изображение не удовлетворяет требованиям.",y="Неверный запрос.",w="Ошибка загрузки файла на сервер. Код: ",b="Ошибка создания превью. Код: ",x="Превью успешно создано",A="Не удалось получить размеры изображения",C=f.photo,D=250,T=350,M=5,I=170,E=238,k={headers:{"X-CSRFToken":(0,p.m5)()}},F=c()("#user-photo-upload"),B=(c()(".modal-header",F),c()(".modal-body",F)),R={initPhotoUploaderAndCropper:function(){void 0!==f.userID&&(c()(".login-helper").click((function(t){t.preventDefault(),c()(this).closest("form").submit()})),c()("a[href='#user-photo-upload']").click((function(){F.modal("toggle"),null===C&&R.uploadInit()})),F.one("shown.bs.modal",(function(){null!==C&&R.thumbInit(C)})))},uploadInit:function(){var t=document.getElementById("simple-btn");u().event.off(t,"change",R.uploadValidate),B.html(m.upload()),t=document.getElementById("simple-btn"),u().event.on(t,"change",R.uploadValidate)},uploadValidate:function(t){var e=u().getFiles(t);u().filterFiles(e,(function(t,e){if(/^image/.test(t.type)&&e)return e.width>=D&&e.height>=T&&t.size<=M*u().MB}),(function(t,i){t.length?R.uploadProgress(e[0]):(0,p.sc)(v,"error")}))},enableLoadingState:function(){B.addClass("load-state")},disableLoadingState:function(){B.removeClass("load-state")},uploadProgress:function(t){var e=u().extend({},k,{url:"/users/".concat(f.userID,"/profile-update-image/"),files:{photo:t},upload:function(){R.enableLoadingState()},complete:function(e,i){if(e)R.uploadError(i);else{var n=JSON.parse(i.response);R.uploadSuccess(n,t)}}});u().upload(e)},uploadError:function(t){var e;switch(R.disableLoadingState(),t.status){case 500:e=g;break;case 403:e=y;break;default:e=t.response}(0,p.sc)(w+e,"error")},uploadSuccess:function(t,e){!0===t.success?u().getInfo(e,(function(e,i){e?(0,p.sc)(A,"error"):(t.width=i.width,t.height=i.height,C=t,R.thumbInit(t))})):(0,p.sc)(g,"error")},thumbInit:function(t){R.enableLoadingState(),t.url=t.url+"?"+(new Date).getTime(),R.cropperInit(t)},cropperInit:function(t){var e=B.width()-40,i=Math.min(t.width,e),n=Math.round(i/t.width*t.height);B.html(m.thumb({url:t.url,width:i,height:n}));var a=B.find(".uploaded-img")[0];a.onload=function(){var t=new(s())(a,{viewMode:1,background:!0,responsive:!1,autoCropArea:1,aspectRatio:5/7,dragMode:"move",guides:!1,movable:!1,scalable:!1,rotatable:!1,zoomable:!1,zoomOnTouch:!1,zoomOnWheel:!1,minContainerWidth:250,minContainerHeight:250,offsetWidth:0,offsetHeight:0,minCropBoxWidth:I,minCropBoxHeight:E,ready:function(){B.find(".-prev").click((function(){R.uploadInit()})),B.find(".save-crop-data").click((function(){R.thumbDone(t)})),R.setCropBox(t),R.disableLoadingState()}})},a.src=t.url},thumbDone:function(t){t.disable();var e=R.getCropBox(t),i=c().extend({crop_data:!0},e),n=c().extend(!0,{},k,{url:"/users/".concat(f.userID,"/profile-update-image/"),method:"POST",dataType:"json",data:i});c().ajax(n).done((function(e){t.enable(),!0===e.success?R.thumbSuccess(t,e):(0,p.sc)(e.reason,"error")})).fail((function(e){t.enable(),(0,p.sc)(b+e.statusText,"error")}))},getCropBox:function(t){return t.getData(!0)},setCropBox:function(t){if(void 0!==C.cropbox){var e=C.cropbox;t.setData(e)}},thumbSuccess:function(t,e){t.enable(),c()(".thumbnail-img img").attr("src",e.thumbnail),(0,p.sc)(x),F.modal("hide")}};var O=(0,d.Z)(L,1e3,{leading:!0,trailing:!1});function S(t){if(window.__CSC__.socialAccountsApp.isEnabled){var e=window.__CSC__.socialAccountsApp.userID;null!==e&&("#connected-accounts"===t&&L(e),function(t){document.querySelector('.nav a[href="#connected-accounts"]').addEventListener("mouseenter",(0,n.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(t);case 1:case"end":return e.stop()}}),e)}))),{once:!0})}(e))}}function L(t){if(null!==t){var e=document.querySelector(".connected-accounts");if(null!==e&&"true"!==e.getAttribute("data-fetched")){var i="/api/v1/users/".concat(t,"/connected-accounts/"),n=Object.assign({},k,{url:i,method:"GET",dataType:"json"});c().ajax(n).done((function(t){t.edges.forEach((function(t){var e=document.querySelector('._connected-account[data-provider="'.concat(t.provider,'"]'));if(null!==e){var i,n=e.querySelector("._uid");i=null!==t.login?"Login: ".concat(t.login):"id: ".concat(t.uid),n.textContent=i;var a=e.querySelector("button._associate[disabled]");if(null!==a){var r=a.getAttribute("data-disconnect"),o=a.closest("form");o.action=r,o.method="POST",c()(a).text("Отключить").attr("type","submit").removeClass("btn-primary").addClass("btn-danger").removeAttr("disabled")}}})),Array.from(e.querySelectorAll("._associate[disabled]")).forEach((function(t){t.type="submit",t.removeAttribute("disabled")})),c()(e).attr("data-fetched",!0)})).fail((function(t){(0,p.sc)(t.statusText,"error"),c()(e).attr("data-fetched",!0)}))}}}function P(){var t=window.location.hash;S(t),function(t){var e=c()(".profile-additional-info .nav-tabs");e.find('a[href="'+t+'"]').length>0&&(e.find("li").removeClass("active").find("a").blur(),e.find('a[href="'+t+'"]').tab("show").hover())}(t),R.initPhotoUploaderAndCropper()}},41131:function(t){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t){return h(t)||c(t)||l(t)||d()}function h(t){if(Array.isArray(t))return u(t)}function c(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p="undefined"!=typeof window&&void 0!==window.document,f=p?window:{},m=!(!p||!f.document.documentElement)&&"ontouchstart"in f.document.documentElement,g=!!p&&"PointerEvent"in f,v="cropper",y="all",w="crop",b="move",x="zoom",A="e",C="w",D="s",T="n",M="ne",I="nw",E="se",k="sw",F="".concat(v,"-crop"),B="".concat(v,"-disabled"),R="".concat(v,"-hidden"),O="".concat(v,"-hide"),S="".concat(v,"-invisible"),L="".concat(v,"-modal"),P="".concat(v,"-move"),j="".concat(v,"Action"),H="".concat(v,"Preview"),z="crop",_="move",N="none",U="crop",W="cropend",X="cropmove",q="cropstart",Y="dblclick",G=m?"touchstart":"mousedown",$=m?"touchmove":"mousemove",Z=m?"touchend touchcancel":"mouseup",Q=g?"pointerdown":G,V=g?"pointermove":$,K=g?"pointerup pointercancel":Z,J="ready",tt="resize",et="wheel",it="zoom",nt="image/jpeg",at=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,rt=/^data:/,ot=/^data:image\/jpeg;base64,/,st=/^img|canvas$/i,ht=200,ct=100,lt={viewMode:0,dragMode:z,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ht,minContainerHeight:ct,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ut='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',dt=Number.isNaN||f.isNaN;function pt(t){return"number"==typeof t&&!dt(t)}var ft=function(t){return t>0&&t<1/0};function mt(t){return void 0===t}function gt(t){return"object"===i(t)&&null!==t}var vt=Object.prototype.hasOwnProperty;function yt(t){if(!gt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&vt.call(i,"isPrototypeOf")}catch(t){return!1}}function wt(t){return"function"==typeof t}var bt=Array.prototype.slice;function xt(t){return Array.from?Array.from(t):bt.call(t)}function At(t,e){return t&&wt(e)&&(Array.isArray(t)||pt(t.length)?xt(t).forEach((function(i,n){e.call(t,i,n,t)})):gt(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var Ct=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return gt(t)&&i.length>0&&i.forEach((function(e){gt(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},Dt=/\.\d*(?:0|9){12}\d*$/;function Tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Dt.test(t)?Math.round(t*e)/e:t}var Mt=/^width|height|left|top|marginLeft|marginTop$/;function It(t,e){var i=t.style;At(e,(function(t,e){Mt.test(e)&&pt(t)&&(t="".concat(t,"px")),i[e]=t}))}function Et(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function kt(t,e){if(e)if(pt(t.length))At(t,(function(t){kt(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Ft(t,e){e&&(pt(t.length)?At(t,(function(t){Ft(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Bt(t,e,i){e&&(pt(t.length)?At(t,(function(t){Bt(t,e,i)})):i?kt(t,e):Ft(t,e))}var Rt=/([a-z\d])([A-Z])/g;function Ot(t){return t.replace(Rt,"$1-$2").toLowerCase()}function St(t,e){return gt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ot(e)))}function Lt(t,e,i){gt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Ot(e)),i)}function Pt(t,e){if(gt(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Ot(e)))}var jt=/\s\s*/,Ht=function(){var t=!1;if(p){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});f.addEventListener("test",i,n),f.removeEventListener("test",i,n)}return t}();function zt(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(jt).forEach((function(e){if(!Ht){var r=t.listeners;r&&r[e]&&r[e][i]&&(a=r[e][i],delete r[e][i],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,a,n)}))}function _t(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i;e.trim().split(jt).forEach((function(e){if(n.once&&!Ht){var r=t.listeners,o=void 0===r?{}:r;a=function(){delete o[e][i],t.removeEventListener(e,a,n);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];i.apply(t,s)},o[e]||(o[e]={}),o[e][i]&&t.removeEventListener(e,o[e][i],n),o[e][i]=a,t.listeners=o}t.addEventListener(e,a,n)}))}function Nt(t,e,i){var n;return wt(Event)&&wt(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function Ut(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Wt=f.location,Xt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function qt(t){var e=t.match(Xt);return null!==e&&(e[1]!==Wt.protocol||e[2]!==Wt.hostname||e[3]!==Wt.port)}function Yt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Gt(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,r=t.translateY,o=[];pt(a)&&0!==a&&o.push("translateX(".concat(a,"px)")),pt(r)&&0!==r&&o.push("translateY(".concat(r,"px)")),pt(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),pt(i)&&1!==i&&o.push("scaleX(".concat(i,")")),pt(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function $t(t){var i=e({},t),n=0;return At(t,(function(t,e){delete i[e],At(i,(function(e){var i=Math.abs(t.startX-e.startX),a=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+a*a),h=(Math.sqrt(r*r+o*o)-s)/s;Math.abs(h)>Math.abs(n)&&(n=h)}))})),n}function Zt(t,i){var n=t.pageX,a=t.pageY,r={endX:n,endY:a};return i?r:e({startX:n,startY:a},r)}function Qt(t){var e=0,i=0,n=0;return At(t,(function(t){var a=t.startX,r=t.startY;e+=a,i+=r,n+=1})),{pageX:e/=n,pageY:i/=n}}function Vt(t){var e=t.aspectRatio,i=t.height,n=t.width,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=ft(n),o=ft(i);if(r&&o){var s=i*e;"contain"===a&&s>n||"cover"===a&&s<n?i=n/e:n=i*e}else r?i=n/e:o&&(n=i*e);return{width:n,height:i}}function Kt(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var a=n%90*Math.PI/180,r=Math.sin(a),o=Math.cos(a),s=e*o+i*r,h=e*r+i*o;return n>90?{width:h,height:s}:{width:s,height:h}}function Jt(t,e,i,n){var a=e.aspectRatio,r=e.naturalWidth,o=e.naturalHeight,h=e.rotate,c=void 0===h?0:h,l=e.scaleX,u=void 0===l?1:l,d=e.scaleY,p=void 0===d?1:d,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,v=n.fillColor,y=void 0===v?"transparent":v,w=n.imageSmoothingEnabled,b=void 0===w||w,x=n.imageSmoothingQuality,A=void 0===x?"low":x,C=n.maxWidth,D=void 0===C?1/0:C,T=n.maxHeight,M=void 0===T?1/0:T,I=n.minWidth,E=void 0===I?0:I,k=n.minHeight,F=void 0===k?0:k,B=document.createElement("canvas"),R=B.getContext("2d"),O=Vt({aspectRatio:f,width:D,height:M}),S=Vt({aspectRatio:f,width:E,height:F},"cover"),L=Math.min(O.width,Math.max(S.width,m)),P=Math.min(O.height,Math.max(S.height,g)),j=Vt({aspectRatio:a,width:D,height:M}),H=Vt({aspectRatio:a,width:E,height:F},"cover"),z=Math.min(j.width,Math.max(H.width,r)),_=Math.min(j.height,Math.max(H.height,o)),N=[-z/2,-_/2,z,_];return B.width=Tt(L),B.height=Tt(P),R.fillStyle=y,R.fillRect(0,0,L,P),R.save(),R.translate(L/2,P/2),R.rotate(c*Math.PI/180),R.scale(u,p),R.imageSmoothingEnabled=b,R.imageSmoothingQuality=A,R.drawImage.apply(R,[t].concat(s(N.map((function(t){return Math.floor(Tt(t))}))))),R.restore(),B}var te=String.fromCharCode;function ee(t,e,i){var n="";i+=e;for(var a=e;a<i;a+=1)n+=te(t.getUint8(a));return n}var ie=/^data:.*,/;function ne(t){var e=t.replace(ie,""),i=atob(e),n=new ArrayBuffer(i.length),a=new Uint8Array(n);return At(a,(function(t,e){a[e]=i.charCodeAt(e)})),n}function ae(t,e){for(var i=[],n=8192,a=new Uint8Array(t);a.length>0;)i.push(te.apply(null,xt(a.subarray(0,n)))),a=a.subarray(n);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function re(t){var e,i=new DataView(t);try{var n,a,r;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var o=i.byteLength,s=2;s+1<o;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){a=s;break}s+=1}if(a){var h=a+10;if("Exif"===ee(i,a+4,4)){var c=i.getUint16(h);if(((n=18761===c)||19789===c)&&42===i.getUint16(h+2,n)){var l=i.getUint32(h+4,n);l>=8&&(r=h+l)}}}if(r){var u,d,p=i.getUint16(r,n);for(d=0;d<p;d+=1)if(u=r+12*d+2,274===i.getUint16(u,n)){u+=8,e=i.getUint16(u,n),i.setUint16(u,1,n);break}}}catch(t){e=1}return e}function oe(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}var se={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,a=Number(e.minContainerWidth),r=Number(e.minContainerHeight);kt(n,R),Ft(t,R);var o={width:Math.max(i.offsetWidth,a>=0?a:ht),height:Math.max(i.offsetHeight,r>=0?r:ct)};this.containerData=o,It(n,{width:o.width,height:o.height}),kt(t,R),Ft(n,R)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,a=n?e.naturalHeight:e.naturalWidth,r=n?e.naturalWidth:e.naturalHeight,o=a/r,s=t.width,h=t.height;t.height*o>t.width?3===i?s=t.height*o:h=t.width/o:3===i?h=t.width/o:s=t.height*o;var c={aspectRatio:o,naturalWidth:a,naturalHeight:r,width:s,height:h};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=Ct({},c)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=i.viewMode,s=a.aspectRatio,h=this.cropped&&r;if(t){var c=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;o>1?(c=Math.max(c,n.width),l=Math.max(l,n.height),3===o&&(l*s>c?c=l*s:l=c/s)):o>0&&(c?c=Math.max(c,h?r.width:0):l?l=Math.max(l,h?r.height:0):h&&(c=r.width,(l=r.height)*s>c?c=l*s:l=c/s));var u=Vt({aspectRatio:s,width:c,height:l});c=u.width,l=u.height,a.minWidth=c,a.minHeight=l,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(o>(h?0:1)){var d=n.width-a.width,p=n.height-a.height;a.minLeft=Math.min(0,d),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,d),a.maxTop=Math.max(0,p),h&&this.limited&&(a.minLeft=Math.min(r.left,r.left+(r.width-a.width)),a.minTop=Math.min(r.top,r.top+(r.height-a.height)),a.maxLeft=r.left,a.maxTop=r.top,2===o&&(a.width>=n.width&&(a.minLeft=Math.min(0,d),a.maxLeft=Math.max(0,d)),a.height>=n.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var a=Kt({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=a.width,o=a.height,s=i.width*(r/i.naturalWidth),h=i.height*(o/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(h-i.height)/2,i.width=s,i.height=h,i.aspectRatio=r/o,i.naturalWidth=r,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,It(this.canvas,Ct({width:i.width,height:i.height},Gt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);Ct(i,{width:n,height:a,left:(e.width-n)/2,top:(e.height-a)/2}),It(this.image,Ct({width:i.width,height:i.height},Gt(Ct({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=Ct({},a)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=this.limited,s=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,l=o?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,u=o?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;h=Math.min(h,n.width),c=Math.min(c,n.height),s&&(h&&c?c*s>h?c=h/s:h=c*s:h?c=h/s:c&&(h=c*s),u*s>l?u=l/s:l=u*s),r.minWidth=Math.min(h,l),r.minHeight=Math.min(c,u),r.maxWidth=l,r.maxHeight=u}e&&(o?(r.minLeft=Math.max(0,a.left),r.minTop=Math.max(0,a.top),r.maxLeft=Math.min(n.width,a.left+a.width)-r.width,r.maxTop=Math.min(n.height,a.top+a.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Lt(this.face,j,i.width>=e.width&&i.height>=e.height?b:y),It(this.cropBox,Ct({width:i.width,height:i.height},Gt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Nt(this.element,U,this.getData())}},he={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=n,r.alt=a,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var o=i;"string"==typeof i?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,At(o,(function(t){var i=document.createElement("img");Lt(t,H,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=a,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){At(this.previews,(function(t){var e=St(t,H);It(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Pt(t,H)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,a=i.height,r=t.width,o=t.height,s=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(It(this.viewBoxImage,Ct({width:r,height:o},Gt(Ct({translateX:-s,translateY:-h},t)))),At(this.previews,(function(e){var i=St(e,H),c=i.width,l=i.height,u=c,d=l,p=1;n&&(d=a*(p=c/n)),a&&d>l&&(u=n*(p=l/a),d=l),It(e,{width:u,height:d}),It(e.getElementsByTagName("img")[0],Ct({width:r*p,height:o*p},Gt(Ct({translateX:-s*p,translateY:-h*p},t))))})))}},ce={bind:function(){var t=this.element,e=this.options,i=this.cropper;wt(e.cropstart)&&_t(t,q,e.cropstart),wt(e.cropmove)&&_t(t,X,e.cropmove),wt(e.cropend)&&_t(t,W,e.cropend),wt(e.crop)&&_t(t,U,e.crop),wt(e.zoom)&&_t(t,it,e.zoom),_t(i,Q,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&_t(i,et,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&_t(i,Y,this.onDblclick=this.dblclick.bind(this)),_t(t.ownerDocument,V,this.onCropMove=this.cropMove.bind(this)),_t(t.ownerDocument,K,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&_t(window,tt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;wt(e.cropstart)&&zt(t,q,e.cropstart),wt(e.cropmove)&&zt(t,X,e.cropmove),wt(e.cropend)&&zt(t,W,e.cropend),wt(e.crop)&&zt(t,U,e.crop),wt(e.zoom)&&zt(t,it,e.zoom),zt(i,Q,this.onCropStart),e.zoomable&&e.zoomOnWheel&&zt(i,et,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&zt(i,Y,this.onDblclick),zt(t.ownerDocument,V,this.onCropMove),zt(t.ownerDocument,K,this.onCropEnd),e.responsive&&zt(window,tt,this.onResize)}},le={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,a=this.containerData,r=n.offsetWidth/a.width,o=n.offsetHeight/a.height,s=Math.abs(r-1)>Math.abs(o-1)?r:o;1!==s&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(At(t,(function(e,i){t[i]=e*s}))),this.setCropBoxData(At(e,(function(t,i){e[i]=t*s})))))}},dblclick:function(){this.disabled||this.options.dragMode===N||this.setDragMode(Et(this.dragBox,F)?_:z)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(pt(e)&&1!==e||pt(i)&&0!==i||t.ctrlKey))){var n,a=this.options,r=this.pointers;t.changedTouches?At(t.changedTouches,(function(t){r[t.identifier]=Zt(t)})):r[t.pointerId||0]=Zt(t),n=Object.keys(r).length>1&&a.zoomable&&a.zoomOnTouch?x:St(t.target,j),at.test(n)&&!1!==Nt(this.element,q,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===w&&(this.cropping=!0,kt(this.dragBox,L)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Nt(this.element,X,{originalEvent:t,action:e})&&(t.changedTouches?At(t.changedTouches,(function(t){Ct(i[t.identifier]||{},Zt(t,!0))})):Ct(i[t.pointerId||0]||{},Zt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?At(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Bt(this.dragBox,L,this.cropped&&this.options.modal)),Nt(this.element,W,{originalEvent:t,action:e}))}}},ue={change:function(t){var e,i=this.options,n=this.canvasData,a=this.containerData,r=this.cropBoxData,o=this.pointers,s=this.action,h=i.aspectRatio,c=r.left,l=r.top,u=r.width,d=r.height,p=c+u,f=l+d,m=0,g=0,v=a.width,F=a.height,B=!0;!h&&t.shiftKey&&(h=u&&d?u/d:1),this.limited&&(m=r.minLeft,g=r.minTop,v=m+Math.min(a.width,n.width,n.left+n.width),F=g+Math.min(a.height,n.height,n.top+n.height));var O=o[Object.keys(o)[0]],S={x:O.endX-O.startX,y:O.endY-O.startY},L=function(t){switch(t){case A:p+S.x>v&&(S.x=v-p);break;case C:c+S.x<m&&(S.x=m-c);break;case T:l+S.y<g&&(S.y=g-l);break;case D:f+S.y>F&&(S.y=F-f)}};switch(s){case y:c+=S.x,l+=S.y;break;case A:if(S.x>=0&&(p>=v||h&&(l<=g||f>=F))){B=!1;break}L(A),(u+=S.x)<0&&(s=C,c-=u=-u),h&&(d=u/h,l+=(r.height-d)/2);break;case T:if(S.y<=0&&(l<=g||h&&(c<=m||p>=v))){B=!1;break}L(T),d-=S.y,l+=S.y,d<0&&(s=D,l-=d=-d),h&&(u=d*h,c+=(r.width-u)/2);break;case C:if(S.x<=0&&(c<=m||h&&(l<=g||f>=F))){B=!1;break}L(C),u-=S.x,c+=S.x,u<0&&(s=A,c-=u=-u),h&&(d=u/h,l+=(r.height-d)/2);break;case D:if(S.y>=0&&(f>=F||h&&(c<=m||p>=v))){B=!1;break}L(D),(d+=S.y)<0&&(s=T,l-=d=-d),h&&(u=d*h,c+=(r.width-u)/2);break;case M:if(h){if(S.y<=0&&(l<=g||p>=v)){B=!1;break}L(T),d-=S.y,l+=S.y,u=d*h}else L(T),L(A),S.x>=0?p<v?u+=S.x:S.y<=0&&l<=g&&(B=!1):u+=S.x,S.y<=0?l>g&&(d-=S.y,l+=S.y):(d-=S.y,l+=S.y);u<0&&d<0?(s=k,l-=d=-d,c-=u=-u):u<0?(s=I,c-=u=-u):d<0&&(s=E,l-=d=-d);break;case I:if(h){if(S.y<=0&&(l<=g||c<=m)){B=!1;break}L(T),d-=S.y,l+=S.y,u=d*h,c+=r.width-u}else L(T),L(C),S.x<=0?c>m?(u-=S.x,c+=S.x):S.y<=0&&l<=g&&(B=!1):(u-=S.x,c+=S.x),S.y<=0?l>g&&(d-=S.y,l+=S.y):(d-=S.y,l+=S.y);u<0&&d<0?(s=E,l-=d=-d,c-=u=-u):u<0?(s=M,c-=u=-u):d<0&&(s=k,l-=d=-d);break;case k:if(h){if(S.x<=0&&(c<=m||f>=F)){B=!1;break}L(C),u-=S.x,c+=S.x,d=u/h}else L(D),L(C),S.x<=0?c>m?(u-=S.x,c+=S.x):S.y>=0&&f>=F&&(B=!1):(u-=S.x,c+=S.x),S.y>=0?f<F&&(d+=S.y):d+=S.y;u<0&&d<0?(s=M,l-=d=-d,c-=u=-u):u<0?(s=E,c-=u=-u):d<0&&(s=I,l-=d=-d);break;case E:if(h){if(S.x>=0&&(p>=v||f>=F)){B=!1;break}L(A),d=(u+=S.x)/h}else L(D),L(A),S.x>=0?p<v?u+=S.x:S.y>=0&&f>=F&&(B=!1):u+=S.x,S.y>=0?f<F&&(d+=S.y):d+=S.y;u<0&&d<0?(s=I,l-=d=-d,c-=u=-u):u<0?(s=k,c-=u=-u):d<0&&(s=M,l-=d=-d);break;case b:this.move(S.x,S.y),B=!1;break;case x:this.zoom($t(o),t),B=!1;break;case w:if(!S.x||!S.y){B=!1;break}e=Ut(this.cropper),c=O.startX-e.left,l=O.startY-e.top,u=r.minWidth,d=r.minHeight,S.x>0?s=S.y>0?E:M:S.x<0&&(c-=u,s=S.y>0?k:I),S.y<0&&(l-=d),this.cropped||(Ft(this.cropBox,R),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}B&&(r.width=u,r.height=d,r.left=c,r.top=l,this.action=s,this.renderCropBox()),At(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},de={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&kt(this.dragBox,L),Ft(this.cropBox,R),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ct({},this.initialImageData),this.canvasData=Ct({},this.initialCanvasData),this.cropBoxData=Ct({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ct(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Ft(this.dragBox,L),kt(this.cropBox,R)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,At(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Ft(this.cropper,B)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,kt(this.cropper,B)),this},destroy:function(){var t=this.element;return t[v]?(t[v]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,a=i.top;return this.moveTo(mt(t)?t:n+Number(t),mt(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(pt(t)&&(i.left=t,n=!0),pt(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,a=this.canvasData,r=a.width,o=a.height,s=a.naturalWidth,h=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var c=s*t,l=h*t;if(!1===Nt(this.element,it,{ratio:t,oldRatio:r/s,originalEvent:i}))return this;if(i){var u=this.pointers,d=Ut(this.cropper),p=u&&Object.keys(u).length?Qt(u):{pageX:i.pageX,pageY:i.pageY};a.left-=(c-r)*((p.pageX-d.left-a.left)/r),a.top-=(l-o)*((p.pageY-d.top-a.top)/o)}else yt(e)&&pt(e.x)&&pt(e.y)?(a.left-=(c-r)*((e.x-a.left)/r),a.top-=(l-o)*((e.y-a.top)/o)):(a.left-=(c-r)/2,a.top-=(l-o)/2);a.width=c,a.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return pt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,pt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(pt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(pt(t)&&(i.scaleX=t,n=!0),pt(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,a=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-a.left,y:r.top-a.top,width:r.width,height:r.height};var o=n.width/n.naturalWidth;if(At(t,(function(e,i){t[i]=e/o})),e){var s=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&yt(t)){var r=!1;e.rotatable&&pt(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(pt(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),pt(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;pt(t.x)&&(a.left=t.x*o+n.left),pt(t.y)&&(a.top=t.y*o+n.top),pt(t.width)&&(a.width=t.width*o),pt(t.height)&&(a.height=t.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?Ct({},this.containerData):{}},getImageData:function(){return this.sized?Ct({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&At(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&yt(t)&&(pt(t.left)&&(e.left=t.left),pt(t.top)&&(e.top=t.top),pt(t.width)?(e.width=t.width,e.height=t.width/i):pt(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&yt(t)&&(pt(t.left)&&(n.left=t.left),pt(t.top)&&(n.top=t.top),pt(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),pt(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),a&&(e?n.height=n.width/a:i&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=Jt(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),a=n.x,r=n.y,o=n.width,h=n.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(a*=c,r*=c,o*=c,h*=c);var l=o/h,u=Vt({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=Vt({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=Vt({aspectRatio:l,width:t.width||(1!==c?i.width:o),height:t.height||(1!==c?i.height:h)}),f=p.width,m=p.height;f=Math.min(u.width,Math.max(d.width,f)),m=Math.min(u.height,Math.max(d.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=Tt(f),g.height=Tt(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,m);var y=t.imageSmoothingEnabled,w=void 0===y||y,b=t.imageSmoothingQuality;v.imageSmoothingEnabled=w,b&&(v.imageSmoothingQuality=b);var x,A,C,D,T,M,I=i.width,E=i.height,k=a,F=r;k<=-o||k>I?(k=0,x=0,C=0,T=0):k<=0?(C=-k,k=0,T=x=Math.min(I,o+k)):k<=I&&(C=0,T=x=Math.min(o,I-k)),x<=0||F<=-h||F>E?(F=0,A=0,D=0,M=0):F<=0?(D=-F,F=0,M=A=Math.min(E,h+F)):F<=E&&(D=0,M=A=Math.min(h,E-F));var B=[k,F,x,A];if(T>0&&M>0){var R=f/o;B.push(C*R,D*R,T*R,M*R)}return v.drawImage.apply(v,[i].concat(s(B.map((function(t){return Math.floor(Tt(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||mt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===z,r=e.movable&&t===_;t=a||r?t:N,e.dragMode=t,Lt(i,j,t),Bt(i,F,a),Bt(i,P,r),e.cropBoxMovable||(Lt(n,j,t),Bt(n,F,a),Bt(n,P,r))}return this}},pe=f.Cropper,fe=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),!e||!st.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Ct({},lt,yt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return r(t,[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[v]){if(e[v]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(rt.test(t))ot.test(t)?this.read(ne(t)):this.clone();else{var a=new XMLHttpRequest,r=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=r,a.onerror=r,a.ontimeout=r,a.onprogress=function(){a.getResponseHeader("content-type")!==nt&&a.abort()},a.onload=function(){e.read(a.response)},a.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&qt(t)&&i.crossOrigin&&(t=Yt(t)),a.open("GET",t,!0),a.responseType="arraybuffer",a.withCredentials="use-credentials"===i.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=re(t),a=0,r=1,o=1;if(n>1){this.url=ae(t,nt);var s=oe(n);a=s.rotate,r=s.scaleX,o=s.scaleY}e.rotatable&&(i.rotate=a),e.scalable&&(i.scaleX=r,i.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&qt(e)&&(i||(i="anonymous"),n=Yt(e)),this.crossOrigin=i,this.crossOriginUrl=n;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=n||e,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),kt(a,O),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=f.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(f.navigator.userAgent),n=function(e,i){Ct(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=Ct({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var a=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){n(a.width,a.height),i||r.removeChild(a)},a.src=e.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(a))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,a=document.createElement("div");a.innerHTML=ut;var r=a.querySelector(".".concat(v,"-container")),o=r.querySelector(".".concat(v,"-canvas")),s=r.querySelector(".".concat(v,"-drag-box")),h=r.querySelector(".".concat(v,"-crop-box")),c=h.querySelector(".".concat(v,"-face"));this.container=n,this.cropper=r,this.canvas=o,this.dragBox=s,this.cropBox=h,this.viewBox=r.querySelector(".".concat(v,"-view-box")),this.face=c,o.appendChild(i),kt(t,R),n.insertBefore(r,t.nextSibling),this.isImg||Ft(i,O),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,kt(h,R),e.guides||kt(h.getElementsByClassName("".concat(v,"-dashed")),R),e.center||kt(h.getElementsByClassName("".concat(v,"-center")),R),e.background&&kt(r,"".concat(v,"-bg")),e.highlight||kt(c,S),e.cropBoxMovable&&(kt(c,P),Lt(c,j,y)),e.cropBoxResizable||(kt(h.getElementsByClassName("".concat(v,"-line")),R),kt(h.getElementsByClassName("".concat(v,"-point")),R)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),wt(e.ready)&&_t(t,J,e.ready,{once:!0}),Nt(t,J)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Ft(this.element,R))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=pe,t}},{key:"setDefaults",value:function(t){Ct(lt,yt(t)&&t)}}]),t}();return Ct(fe.prototype,se,he,ce,le,ue,de),fe}()},95307:function(t,e){var i;!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,i=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=i&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),a=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,r=(i||a)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,r,o,s,h,c;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),r=new ArrayBuffer(e.length),o=new Uint8Array(r),s=0;s<e.length;s+=1)o[s]=e.charCodeAt(s);return h=t.split(",")[0].split(":")[1].split(";")[0],i?new Blob([n?o:r],{type:h}):((c=new a).append(r),c.getBlob(h))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,i,n){n&&e.toDataURL&&r?t(r(this.toDataURL(i,n))):t(this.mozGetAsFile("blob",i))}:e.toDataURL&&r&&(e.toBlob=function(t,e,i){t(r(this.toDataURL(e,i)))})),t.dataURLtoBlob=r}(window),function(t,e){"use strict";var i,n,a=1,r=function(){},o=t.document,s=o.doctype||{},h=t.navigator.userAgent,c=/safari\//i.test(h)&&!/chrome\//i.test(h),l=/iemobile\//i.test(h),u=!c&&/chrome\//i.test(h)&&"http:"===t.location.protocol,d=t.createObjectURL&&t||t.URL&&URL.revokeObjectURL&&URL||t.webkitURL&&webkitURL,p=t.Blob,f=t.File,m=t.FileReader,g=t.FormData,v=t.XMLHttpRequest,y=t.jQuery,w=!(!(f&&m&&(t.Uint8Array||g||v.prototype.sendAsBinary))||c&&/windows/i.test(h)&&!l),b=w&&"withCredentials"in new v,x=w&&!!p&&!!(p.prototype.webkitSlice||p.prototype.mozSlice||p.prototype.slice),A=(""+"".normalize).indexOf("[native code]")>0,C=t.dataURLtoBlob,D=/img/i,T=/canvas/i,M=/img|canvas/i,I=/input/i,E=/^data:[^,]+,/,k={}.toString,F=t.Math,B=function(e){return(e=new t.Number(F.pow(1024,e))).from=function(t){return F.round(t*this)},e},R={},O=[],S="abort progress error load loadend",L="status statusText readyState response responseXML responseText responseBody".split(" "),P=function(t){return t&&"length"in t},j=function(t,e,i){if(t)if(P(t))for(var n=0,a=t.length;n<a;n++)n in t&&e.call(i,t[n],n,t);else for(var r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)},H=function(t){for(var e=arguments,i=1,n=function(e,i){t[i]=e};i<e.length;i++)j(e[i],n);return t},z=function(t,e,i){if(t){var n=X.uid(t);R[n]||(R[n]={});var a=m&&t&&t instanceof m;j(e.split(/\s+/),(function(e){y&&!a?y.event.add(t,e,i):(R[n][e]||(R[n][e]=[]),R[n][e].push(i),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i)}))}},_=function(t,e,i){if(t){var n=X.uid(t),a=R[n]||{},r=m&&t&&t instanceof m;j(e.split(/\s+/),(function(e){if(y&&!r)y.event.remove(t,e,i);else{for(var n=a[e]||[],o=n.length;o--;)if(n[o]===i){n.splice(o,1);break}t.addEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}}))}},N=function(t,e,i){z(t,e,(function n(a){_(t,e,n),i(a)}))},U=function(e){return e.target||(e.target=t.event&&t.event.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e},W=function(t){var e=o.createElement("input");return e.setAttribute("type","file"),t in e},X={version:"2.1.1",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,insecureChrome:u,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(t,e){return t+(null!=e?"["+e+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:B(1),MB:B(2),GB:B(3),TB:B(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(t){return t?t[X.expando]=t[X.expando]||X.uid():(++a,X.expando+a)},log:function(){X.debug&&i&&(n?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(t,e){var i=o.createElement("img");return e&&X.event.one(i,"error load",(function(t){e("error"==t.type,i),i=null})),i.src=t,i},getXHR:function(){var e;if(v)e=new v;else if(t.ActiveXObject)try{e=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e},isArray:P,support:{dnd:b&&"ondrop"in o.createElement("div"),cors:b,html5:w,chunked:x,dataURI:!0,accept:W("accept"),multiple:W("multiple")},event:{on:z,off:_,one:N,fix:U},throttle:function(e,i){var n,a;return function(){a=arguments,n||(e.apply(t,a),n=setTimeout((function(){n=0,e.apply(t,a)}),i))}},F:function(){},parseJSON:function(e){return t.JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(t){return(t=String(t)).trim?t.trim():t.replace(/^\s+|\s+$/g,"")},defer:function(){var t,i,n=[],a={resolve:function(e,o){for(a.resolve=r,i=e||!1,t=o;o=n.shift();)o(i,t)},then:function(a){i!==e?a(i,t):n.push(a)}};return a},queue:function(t){var e=0,i=0,n=!1,a=!1,r={inc:function(){i++},next:function(){e++,setTimeout(r.check,0)},check:function(){e>=i&&!n&&r.end()},isFail:function(){return n},fail:function(){!n&&t(n=!0)},end:function(){a||(a=!0,t())}};return r},each:j,afor:function(t,e){var i=0,n=t.length;P(t)&&n--?function a(){e(n!=i&&a,t[i],i++)}():e(!1)},extend:H,isFile:function(t){return"[object File]"===k.call(t)},isBlob:function(t){return this.isFile(t)||"[object Blob]"===k.call(t)},isCanvas:function(t){return t&&T.test(t.nodeName)},getFilesFilter:function(t){return(t="string"==typeof t?t:t.getAttribute&&t.getAttribute("accept")||"")?new RegExp("("+t.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(t,e){X.isCanvas(t)?q(t,e,"load",X.toDataURL(t)):G(t,e,"DataURL")},readAsBinaryString:function(t,e){Y("BinaryString")?G(t,e,"BinaryString"):G(t,(function(t){if("load"==t.type)try{t.result=X.toBinaryString(t.result)}catch(e){t.type="error",t.message=e.toString()}e(t)}),"DataURL")},readAsArrayBuffer:function(t,e){G(t,e,"ArrayBuffer")},readAsText:function(t,e,i){i||(i=e,e="utf-8"),G(t,i,"Text",e)},toDataURL:function(t,e){return"string"==typeof t?t:t.toDataURL?t.toDataURL(e||"image/png"):void 0},toBinaryString:function(e){return t.atob(X.toDataURL(e).replace(E,""))},readAsImage:function(t,i,n){if(X.isBlob(t))if(d){var a=d.createObjectURL(t);a===e?q(t,i,"error"):X.readAsImage(a,i,n)}else X.readAsDataURL(t,(function(e){"load"==e.type?X.readAsImage(e.result,i,n):(n||"error"==e.type)&&q(t,i,e,null,{loaded:e.loaded,total:e.total})}));else if(X.isCanvas(t))q(t,i,"load",t);else if(D.test(t.nodeName))if(t.complete)q(t,i,"load",t);else{var r="error abort load";N(t,r,(function e(n){"load"==n.type&&d&&d.revokeObjectURL(t.src),_(t,r,e),q(t,i,n,t)}))}else if(t.iframe)q(t,i,{type:"error"});else{var o=X.newImage(t.dataURL||t);X.readAsImage(o,i,n)}},checkFileObj:function(t){var e={},i=X.accept;return"object"==typeof t?e=t:e.name=(t+"").split(/\\|\//g).pop(),null==e.type&&(e.type=e.name.split(".").pop()),j(i,(function(t,i){((t=new RegExp(t.replace(/\s/g,"|"),"i")).test(e.type)||X.ext2mime[e.type])&&(e.type=X.ext2mime[e.type]||i.split("/")[0]+"/"+e.type)})),e},getDropFiles:function(t,e){var i,n=[],a=[],r=K(t),o=r.files,s=r.items,h=P(s)&&s[0]&&Z(s[0]),l=X.queue((function(){e(n,a)}));if(h)if(A&&o){var u,d,p=o.length;for(i=new Array(p);p--;){u=o[p];try{d=Z(s[p])}catch(t){X.log("[err] getDropFiles: ",t),d=null}$(d)&&(d.isDirectory||d.isFile&&u.name==u.name.normalize("NFC"))?i[p]=d:i[p]=u}}else i=s;else i=o;j(i||[],(function(t){l.inc();try{h&&$(t)?Q(t,(function(t,e,i){t?X.log("[err] getDropFiles:",t):n.push.apply(n,e),a.push.apply(a,i),l.next()})):function(t,e){if(!t.type&&(c||t.size%4096==0&&t.size<=102400))if(m)try{var i=new m;N(i,S,(function(t){var n="error"!=t.type;n?(null!=i.readyState&&i.readyState!==i.LOADING||i.abort(),e(n)):e(!1,i.error)})),i.readAsDataURL(t)}catch(t){e(!1,t)}else e(null,new Error("FileReader is not supported"));else e(!0)}(t,(function(e,i){e?n.push(t):t.error=i,a.push(t),l.next()}))}catch(t){l.next(),X.log("[err] getDropFiles: ",t)}})),l.check()},getFiles:function(t,e,i){var n=[];return i?(X.filterFiles(X.getFiles(t),e,i),null):(t.jquery&&(t.each((function(){n=n.concat(X.getFiles(this))})),t=n,n=[]),"string"==typeof e&&(e=X.getFilesFilter(e)),t.originalEvent?t=U(t.originalEvent):t.srcElement&&(t=U(t)),t.dataTransfer?t=t.dataTransfer:t.target&&(t=t.target),t.files?(n=t.files,w||(n[0].blob=t,n[0].iframe=!0)):!w&&V(t)?X.trim(t.value)&&((n=[X.checkFileObj(t.value)])[0].blob=t,n[0].iframe=!0):P(t)&&(n=t),X.filter(n,(function(t){return!e||e.test(t.name)})))},getTotalSize:function(t){for(var e=0,i=t&&t.length;i--;)e+=t[i].size;return e},getInfo:function(t,e){var i={},n=O.concat();X.isBlob(t)?function a(){var r=n.shift();r?r.test(t.type)?r(t,(function(t,n){t?e(t):(H(i,n),a())})):a():e(!1,i)}():e("not_support_info",i)},addInfoReader:function(t,e){e.test=function(e){return t.test(e)},O.push(e)},filter:function(t,e){for(var i,n=[],a=0,r=t.length;a<r;a++)a in t&&(i=t[a],e.call(i,i,a,t)&&n.push(i));return n},filterFiles:function(t,e,i){if(t.length){var n,a=t.concat(),r=[],o=[];!function t(){a.length?(n=a.shift(),X.getInfo(n,(function(i,a){(e(n,!i&&a)?r:o).push(n),t()}))):i(r,o)}()}else i([],t)},upload:function(t){(t=H({jsonp:"callback",prepare:X.F,beforeupload:X.F,upload:X.F,fileupload:X.F,fileprogress:X.F,filecomplete:X.F,progress:X.F,complete:X.F,pause:X.F,imageOriginal:!0,chunkSize:X.chunkSize,chunkUploadRetry:X.chunkUploadRetry,uploadRetry:X.uploadRetry},t)).imageAutoOrientation&&!t.imageTransform&&(t.imageTransform={rotate:"auto"});var e,i=new X.XHR(t),n=this._getFilesDataArray(t.files),a=this,o=0,s=0,h=!1;return j(n,(function(t){o+=t.size})),i.files=[],j(n,(function(t){i.files.push(t.file)})),i.total=o,i.loaded=0,i.filesLeft=n.length,t.beforeupload(i,t),e=function(){var c,l=n.shift(),u=l&&l.file,d=!1,p=(c={},j(t,(function(t,e){t&&"object"==typeof t&&void 0===t.nodeType&&(t=H({},t)),c[e]=t})),c);if(i.filesLeft=n.length,u&&u.name===X.expando&&(u=null,X.log("[warn] FileAPI.upload() — called without files")),("abort"!=i.statusText||i.current)&&l){if(h=!1,i.currentFile=u,u&&!1===t.prepare(u,p))return void e.call(a);p.file=u,a._getFormData(p,l,(function(h){s||t.upload(i,t);var c=new X.XHR(H({},p,{upload:u?function(){t.fileupload(u,c,p)}:r,progress:u?function(e){d||(d=e.loaded===e.total,t.fileprogress({type:"progress",total:l.total=e.total,loaded:l.loaded=e.loaded},u,c,p),t.progress({type:"progress",total:o,loaded:i.loaded=s+l.size*(e.loaded/e.total)||0},u,c,p))}:r,complete:function(n){j(L,(function(t){i[t]=c[t]})),u&&(l.total=l.total||l.size,l.loaded=l.total,n||(this.progress(l),d=!0,s+=l.size,i.loaded=s),t.filecomplete(n,c,u,p)),setTimeout((function(){e.call(a)}),0)}}));i.abort=function(t){t||(n.length=0),this.current=t,c.abort()},c.send(h)}))}else{var f=200==i.status||201==i.status||204==i.status;t.complete(!f&&(i.statusText||"error"),i,t),h=!0}},setTimeout(e,0),i.append=function(t,r){t=X._getFilesDataArray([].concat(t)),j(t,(function(t){o+=t.size,i.files.push(t.file),r?n.unshift(t):n.push(t)})),i.statusText="",h&&e.call(a)},i.remove=function(t){for(var e,i=n.length;i--;)n[i].file==t&&(e=n.splice(i,1),o-=e.size);return e},i},_getFilesDataArray:function(t){var e=[],i={};if(V(t)){var n=X.getFiles(t);i[t.name||"file"]=null!==t.getAttribute("multiple")?n:n[0]}else P(t)&&V(t[0])?j(t,(function(t){i[t.name||"file"]=X.getFiles(t)})):i=t;return j(i,(function t(i,n){P(i)?j(i,(function(e){t(e,n)})):i&&(i.name||i.image)&&e.push({name:n,file:i,size:i.size,total:i.size,loaded:0})})),e.length||e.push({file:{name:X.expando}}),e},_getFormData:function(t,e,i){var n=e.file,a=e.name,r=n.name,o=n.type,s=X.support.transform&&t.imageTransform,h=new X.Form,c=X.queue((function(){i(h)})),l=s&&function(t){var e;for(e in t)if(t.hasOwnProperty(e)&&!(t[e]instanceof Object||"overlay"===e||"filter"===e))return!0;return!1}(s),u=X.postNameConcat;j(t.data,(function t(e,i){"object"==typeof e?j(e,(function(e,n){t(e,u(i,n))})):h.append(i,e)})),function e(i){i.image?(c.inc(),i.toData((function(t,n){i.file&&(n.type=i.file.type,n.quality=i.matrix.quality,r=i.file&&i.file.name),r=r||(new Date).getTime()+".png",e(n),c.next()}))):X.Image&&s&&(/^image/.test(i.type)||M.test(i.nodeName))?(c.inc(),l&&(s=[s]),X.Image.transform(i,s,t.imageAutoOrientation,(function(e,n){if(l&&!e)C||X.flashEngine||(h.multipart=!0),h.append(a,n[0],r,s[0].type||o);else{var d=0;e||j(n,(function(t,e){C||X.flashEngine||(h.multipart=!0),s[e].postName||(d=1),h.append(s[e].postName||u(a,e),t,r,s[e].type||o)})),(e||t.imageOriginal)&&h.append(u(a,d?"original":null),i,r,o)}c.next()}))):r!==X.expando&&h.append(a,i,r)}(n),c.check()},reset:function(t,e){var i,n;return y?(n=y(t).clone(!0).insertBefore(t).val("")[0],e||y(t).remove()):(i=t.parentNode,(n=i.insertBefore(t.cloneNode(!0),t)).value="",e||i.removeChild(t),j(R[X.uid(t)],(function(e,i){j(e,(function(e){_(t,i,e),z(n,i,e)}))}))),n},load:function(t,e){var i=X.getXHR();return i?(i.open("GET",t,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),z(i,"progress",(function(t){t.lengthComputable&&e({type:t.type,loaded:t.loaded,total:t.total},i)})),i.onreadystatechange=function(){if(4==i.readyState)if(i.onreadystatechange=null,200==i.status){var n={name:(t=t.split("/"))[t.length-1],size:i.getResponseHeader("Content-Length"),type:i.getResponseHeader("Content-Type")};n.dataURL="data:"+n.type+";base64,"+X.encode64(i.responseBody||i.responseText),e({type:"load",result:n},i)}else e({type:"error"},i)},i.send(null)):e({type:"error"}),i},encode64:function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;for("string"!=typeof t&&(t=String(t));n<t.length;){var a,r,o=255&t.charCodeAt(n++),s=255&t.charCodeAt(n++),h=255&t.charCodeAt(n++),c=o>>2,l=(3&o)<<4|s>>4;isNaN(s)?a=r=64:(a=(15&s)<<2|h>>6,r=isNaN(h)?64:63&h),i+=e.charAt(c)+e.charAt(l)+e.charAt(a)+e.charAt(r)}return i}};function q(t,e,i,n,a){var r={type:i.type||i,target:t,result:n};H(r,a),e(r)}function Y(t){return m&&!!m.prototype["readAs"+t]}function G(t,i,n,a){if(X.isBlob(t)&&Y(n)){var r=new m;z(r,S,(function e(n){var a=n.type;"progress"==a?q(t,i,n,n.target.result,{loaded:n.loaded,total:n.total}):"loadend"==a?(_(r,S,e),r=null):q(t,i,n,n.target.result)}));try{a?r["readAs"+n](t,a):r["readAs"+n](t)}catch(n){q(t,i,"error",e,{error:n.toString()})}}else q(t,i,"error",e,{error:"filreader_not_support_"+n})}function $(t){return t&&(t.isFile||t.isDirectory)}function Z(t){var e;return t.getAsEntry?e=t.getAsEntry():t.webkitGetAsEntry&&(e=t.webkitGetAsEntry()),e}function Q(t,e){if(t)if(t.isFile)t.file((function(i){i.fullPath=t.fullPath,e(!1,[i],[i])}),(function(i){t.error=i,e("FileError.code: "+i.code,[],[t])}));else if(t.isDirectory){var i=t.createReader(),n=!0,a=[],r=[t],o=function(i){t.error=i,e("DirectoryError.code: "+i.code,a,r)};i.readEntries((function s(h){n&&(n=!1,h.length||(t.error=new Error("directory is empty"))),h.length?X.afor(h,(function(t,e){Q(e,(function(e,n,h){e||(a=a.concat(n)),r=r.concat(h),t?t():i.readEntries(s,o)}))})):e(!1,a,r)}),o)}else Q(Z(t),e);else{var s=new Error("invalid entry");(t=new Object(t)).error=s,e(s.message,[],[t])}}function V(t){return I.test(t&&t.tagName)}function K(t){return(t.originalEvent||t||"").dataTransfer||{}}X.addInfoReader(/^image/,(function(t,e){if(!t.__dimensions){var i=t.__dimensions=X.defer();X.readAsImage(t,(function(t){var e=t.target;i.resolve("load"!=t.type&&"error",{width:e.width,height:e.height}),e.src=X.EMPTY_PNG,e=null}))}t.__dimensions.then(e)})),X.event.dnd=function(t,e,i){var n,a;i||(i=e,e=X.F),m?(z(t,"dragenter dragleave dragover",e.ff=e.ff||function(t){for(var i=K(t).types,r=i&&i.length,o=!1;r--;)if(~i[r].indexOf("File")){t.preventDefault(),a!==t.type&&("dragleave"!=(a=t.type)&&e.call(t.currentTarget,!0,t),o=!0);break}o&&(clearTimeout(n),n=setTimeout((function(){e.call(t.currentTarget,"dragleave"!=a,t)}),50))}),z(t,"drop",i.ff=i.ff||function(t){t.preventDefault(),a=0,X.getDropFiles(t,(function(e,n){i.call(t.currentTarget,e,n,t)})),e.call(t.currentTarget,!1,t)})):X.log("Drag'n'Drop -- not supported")},X.event.dnd.off=function(t,e,i){_(t,"dragenter dragleave dragover",e.ff),_(t,"drop",i.ff)},y&&!y.fn.dnd&&(y.fn.dnd=function(t,e){return this.each((function(){X.event.dnd(this,t,e)}))},y.fn.offdnd=function(t,e){return this.each((function(){X.event.dnd.off(this,t,e)}))}),t.FileAPI=H(X,t.FileAPI),X.log("FileAPI: "+X.version),X.log("protocol: "+t.location.protocol),X.log("doctype: ["+s.name+"] "+s.publicId+" "+s.systemId),j(o.getElementsByTagName("meta"),(function(t){/x-ua-compatible/i.test(t.getAttribute("http-equiv"))&&X.log("meta.http-equiv: "+t.getAttribute("content"))}));try{i=!!console.log,n=!!console.log.apply}catch(t){}X.flashUrl||(X.flashUrl=X.staticPath+"FileAPI.flash.swf"),X.flashImageUrl||(X.flashImageUrl=X.staticPath+"FileAPI.flash.image.swf"),X.flashWebcamUrl||(X.flashWebcamUrl=X.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(t,e,i){"use strict";var n=Math.min,a=Math.round,r=function(){return e.createElement("canvas")},o=!1,s={8:270,3:180,6:90,7:270,4:180,5:90};try{o=r().toDataURL("image/png").indexOf("data:image/png")>-1}catch(t){}function h(e){if(e instanceof h){var i=new h(e.file);return t.extend(i.matrix,e.matrix),i}if(!(this instanceof h))return new h(e);this.file=e,this.size=e.size||100,this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0}}h.prototype={image:!0,constructor:h,set:function(e){return t.extend(this.matrix,e),this},crop:function(t,e,n,a){return n===i&&(n=t,a=e,t=e=0),this.set({sx:t,sy:e,sw:n,sh:a||n})},resize:function(t,e,i){return/min|max|height|width/.test(e)&&(i=e,e=t),this.set({dw:t,dh:e||t,resize:i})},preview:function(t,e){return this.resize(t,e||t,"preview")},rotate:function(t){return this.set({deg:t})},filter:function(t){return this.set({filter:t})},overlay:function(t){return this.set({overlay:t})},clone:function(){return new h(this)},_load:function(e,i){var n=this;/img|video/i.test(e.nodeName)?i.call(n,null,e):t.readAsImage(e,(function(t){i.call(n,"load"!=t.type,t.result)}))},_apply:function(e,i){var a,o=r(),s=this.getMatrix(e),c=o.getContext("2d"),l=e.videoWidth||e.width,u=e.videoHeight||e.height,d=s.deg,p=s.dw,f=s.dh,m=l,g=u,v=s.filter,y=e,w=s.overlay,b=t.queue((function(){e.src=t.EMPTY_PNG,i(!1,o)})),x=t.renderImageToCanvas;for(d-=360*Math.floor(d/360),e._type=this.file.type;s.multipass&&n(m/p,g/f)>2;)m=m/2+.5|0,g=g/2+.5|0,(a=r()).width=m,a.height=g,y!==e?(x(a,y,0,0,y.width,y.height,0,0,m,g),y=a):(x(y=a,e,s.sx,s.sy,s.sw,s.sh,0,0,m,g),s.sx=s.sy=s.sw=s.sh=0);o.width=d%180?f:p,o.height=d%180?p:f,o.type=s.type,o.quality=s.quality,c.rotate(d*Math.PI/180),x(c.canvas,y,s.sx,s.sy,s.sw||y.width,s.sh||y.height,180==d||270==d?-p:0,90==d||180==d?-f:0,p,f),c.setTransform(1,0,0,1,0,0),p=o.width,f=o.height,w&&t.each([].concat(w),(function(e){b.inc();var i=new window.Image,n=function(){var a=0|e.x,r=0|e.y,o=e.w||i.width,s=e.h||i.height,h=e.rel;a=1==h||4==h||7==h?(p-o+a)/2:2==h||5==h||8==h?p-(o+a):a,r=3==h||4==h||5==h?(f-s+r)/2:h>=6?f-(s+r):r,t.event.off(i,"error load abort",n);try{c.globalAlpha=e.opacity||1,c.drawImage(i,a,r,o,s)}catch(t){}b.next()};t.event.on(i,"error load abort",n),i.src=e.src,i.complete&&n()})),v&&(b.inc(),h.applyFilter(o,v,b.next)),b.check()},getMatrix:function(e){var i,r,o=t.extend({},this.matrix),s=o.sw=o.sw||e.videoWidth||e.naturalWidth||e.width,h=o.sh=o.sh||e.videoHeight||e.naturalHeight||e.height,c=o.dw=o.dw||s,l=o.dh=o.dh||h,u=s/h,d=c/l,p=o.resize;"preview"==p?c==s&&l==h||(d>=u?r=(i=s)/d:i=(r=h)*d,i==s&&r==h||(o.sx=~~((s-i)/2),o.sy=~~((h-r)/2),s=i,h=r)):"height"==p?c=l*u:"width"==p?l=c/u:p&&(s>c||h>l?"min"==p?(c=a(u<d?n(s,c):l*u),l=a(u<d?c/u:n(h,l))):(c=a(u>=d?n(s,c):l*u),l=a(u>=d?c/u:n(h,l))):(c=s,l=h));return o.sw=s,o.sh=h,o.dw=c,o.dh=l,o.multipass=t.multiPassResize,o},_trans:function(e){this._load(this.file,(function(i,n){if(i)e(i);else try{this._apply(n,e)}catch(i){t.log("[err] FileAPI.Image.fn._apply:",i),e(i)}}))},get:function(e){if(t.support.transform){var i=this,n=i.matrix;"auto"==n.deg?t.getInfo(i.file,(function(t,a){n.deg=s[a&&a.exif&&a.exif.Orientation]||0,i._trans(e)})):i._trans(e)}else e("not_support_transform");return this},toData:function(t){return this.get(t)}},h.exifOrientation=s,h.transform=function(e,n,a,r){function o(o,s){var c={},l=t.queue((function(t){r(t,c)}));o?l.fail():t.each(n,(function(t,n){if(!l.isFail()){var r=new h(s.nodeType?s:e),o="function"==typeof t;if(o?t(s,r):t.width?r[t.preview?"preview":"resize"](t.width,t.height,t.strategy):t.maxWidth&&(s.width>t.maxWidth||s.height>t.maxHeight)&&r.resize(t.maxWidth,t.maxHeight,"max"),t.crop){var u=t.crop;r.crop(0|u.x,0|u.y,u.w||u.width,u.h||u.height)}t.rotate===i&&a&&(t.rotate="auto"),r.set({type:r.matrix.type||t.type||e.type||"image/png"}),o||r.set({deg:t.rotate,overlay:t.overlay,filter:t.filter,quality:t.quality||1}),l.inc(),r.toData((function(t,e){t?l.fail():(c[n]=e,l.next())}))}}))}e.width?o(!1,e):t.getInfo(e,o)},t.each(["TOP","CENTER","BOTTOM"],(function(e,i){t.each(["LEFT","CENTER","RIGHT"],(function(t,n){h[e+"_"+t]=3*i+n,h[t+"_"+e]=3*i+n}))})),h.toCanvas=function(t){var i=e.createElement("canvas");return i.width=t.videoWidth||t.width,i.height=t.videoHeight||t.height,i.getContext("2d").drawImage(t,0,0),i},h.fromDataURL=function(e,i,n){var a=t.newImage(e);t.extend(a,i),n(a)},h.applyFilter=function(e,i,n){"function"==typeof i?i(e,n):window.Caman&&window.Caman("IMG"==e.tagName?h.toCanvas(e):e,(function(){"string"==typeof i?this[i]():t.each(i,(function(t,e){this[e](t)}),this),this.render(n)}))},t.renderImageToCanvas=function(e,i,n,a,r,o,s,h,c,l){try{return e.getContext("2d").drawImage(i,n,a,r,o,s,h,c,l)}catch(e){throw t.log("renderImageToCanvas failed"),e}},t.support.canvas=t.support.transform=o,t.Image=h}(FileAPI,document),function(t){"use strict";!function(t){if(!window.navigator||!window.navigator.platform||!/iP(hone|od|ad)/.test(window.navigator.platform))return;var e=t.renderImageToCanvas;t.detectSubsampling=function(t){var e,i;return t.width*t.height>1048576&&((e=document.createElement("canvas")).width=e.height=1,(i=e.getContext("2d")).drawImage(t,1-t.width,0),0===i.getImageData(0,0,1,1).data[3])},t.detectVerticalSquash=function(t,e){var i,n,a,r,o=t.naturalHeight||t.height,s=document.createElement("canvas"),h=s.getContext("2d");for(e&&(o/=2),s.width=1,s.height=o,h.drawImage(t,0,0),i=h.getImageData(0,0,1,o).data,n=0,a=o,r=o;r>n;)0===i[4*(r-1)+3]?a=r:n=r,r=a+n>>1;return r/o||1},t.renderImageToCanvas=function(i,n,a,r,o,s,h,c,l,u){if("image/jpeg"===n._type){var d,p,f,m,g=i.getContext("2d"),v=document.createElement("canvas"),y=1024,w=v.getContext("2d");if(v.width=y,v.height=y,g.save(),(d=t.detectSubsampling(n))&&(a/=2,r/=2,o/=2,s/=2),p=t.detectVerticalSquash(n,d),d||1!==p){for(r*=p,l=Math.ceil(y*l/o),u=Math.ceil(y*u/s/p),c=0,m=0;m<s;){for(h=0,f=0;f<o;)w.clearRect(0,0,y,y),w.drawImage(n,a,r,o,s,-f,-m,o,s),g.drawImage(v,0,0,y,y,h,c,l,u),f+=y,h+=l;m+=y,c+=u}return g.restore(),i}}return e(i,n,a,r,o,s,h,c,l,u)}}(FileAPI)}(),function(t,e){"use strict";var i=e.document,n=e.FormData,a=function(){this.items=[]},r=e.encodeURIComponent;function o(e,i,n){var a=e.blob,r=e.file;if(r){if(!a.toDataURL)return void t.readAsBinaryString(a,(function(t){"load"==t.type&&i(e,t.result)}));var o={"image/jpeg":".jpe?g","image/png":".png"},s=o[e.type]?e.type:"image/png",h=o[s]||".png",c=a.quality||1;r.match(new RegExp(h+"$","i"))||(r+=h.replace("?","")),e.file=r,e.type=s,!n&&a.toBlob?a.toBlob((function(t){i(e,t)}),s,c):i(e,t.toBinaryString(a.toDataURL(s,c)))}else i(e,a)}a.prototype={append:function(t,e,i,n){this.items.push({name:t,blob:e&&e.blob||(null==e?"":e),file:e&&(i||e.name),type:e&&(n||e.type)})},each:function(t){for(var e=0,i=this.items.length;e<i;e++)t.call(this,this.items[e])},toData:function(e,i){i._chunked=t.support.chunked&&i.chunkSize>0&&1==t.filter(this.items,(function(t){return t.file})).length,t.support.html5?t.formData&&!this.multipart&&n?i._chunked?(t.log("FileAPI.Form.toPlainData"),this.toPlainData(e)):(t.log("FileAPI.Form.toFormData"),this.toFormData(e)):(t.log("FileAPI.Form.toMultipartData"),this.toMultipartData(e)):(t.log("FileAPI.Form.toHtmlData"),this.toHtmlData(e))},_to:function(e,i,n,a){var r=t.queue((function(){i(e)}));this.each((function(o){try{n(o,e,r,a)}catch(e){t.log("FileAPI.Form._to: "+e.message),i(e)}})),r.check()},toHtmlData:function(e){this._to(i.createDocumentFragment(),e,(function(e,n){var a,r=e.blob;e.file?(t.reset(r,!0),r.name=e.name,r.disabled=!1,n.appendChild(r)):((a=i.createElement("input")).name=e.name,a.type="hidden",a.value=r,n.appendChild(a))}))},toPlainData:function(t){this._to({},t,(function(t,e,i){t.file&&(e.type=t.file),t.blob.toBlob?(i.inc(),o(t,(function(t,n){e.name=t.name,e.file=n,e.size=n.length,e.type=t.type,i.next()}))):t.file?(e.name=t.blob.name,e.file=t.blob,e.size=t.blob.size,e.type=t.type):(e.params||(e.params=[]),e.params.push(r(t.name)+"="+r(t.blob))),e.start=-1,e.end=e.file&&e.file.FileAPIReadPosition||-1,e.retry=0}))},toFormData:function(t){this._to(new n,t,(function(t,e,i){t.blob&&t.blob.toBlob?(i.inc(),o(t,(function(t,n){e.append(t.name,n,t.file),i.next()}))):t.file?e.append(t.name,t.blob,t.file):e.append(t.name,t.blob),t.file&&e.append("_"+t.name,t.file)}))},toMultipartData:function(e){this._to([],e,(function(t,e,i,n){i.inc(),o(t,(function(t,a){e.push("--_"+n+'\r\nContent-Disposition: form-data; name="'+t.name+'"'+(t.file?'; filename="'+r(t.file)+'"':"")+(t.file?"\r\nContent-Type: "+(t.type||"application/octet-stream"):"")+"\r\n\r\n"+(t.file?a:r(a))+"\r\n"),i.next()}),!0)}),t.expando)}},t.Form=a}(FileAPI,window),function(t,e){"use strict";var i=function(){},n=t.document,a=function(t){this.uid=e.uid(),this.xhr={abort:i,getResponseHeader:i,getAllResponseHeaders:i},this.options=t},r={"":1,XML:1,Text:1,Body:1};a.prototype={status:0,statusText:"",constructor:a,getResponseHeader:function(t){return this.xhr.getResponseHeader(t)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(n,a){var r=this,o=r.options;r.end=r.abort=i,r.status=n,a&&(r.statusText=a),e.log("xhr.end:",n,a),o.complete(200!=n&&201!=n&&(r.statusText||"unknown"),r),r.xhr&&r.xhr.node&&setTimeout((function(){var e=r.xhr.node;try{e.parentNode.removeChild(e)}catch(t){}try{delete t[r.uid]}catch(t){}t[r.uid]=r.xhr.node=null}),9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(t){var e=this,i=this.options;t.toData((function(t){t instanceof Error?e.end(0,t.message):(i.upload(i,e),e._send.call(e,i,t))}),i)},_send:function(i,a){var o,s=this,h=s.uid,c=s.uid+"Load",l=i.url;if(e.log("XHR._send:",a),i.cache||(l+=(~l.indexOf("?")?"&":"?")+e.uid()),a.nodeName){var u=i.jsonp;l=l.replace(/([a-z]+)=(\?)/i,"$1="+h),i.upload(i,s);var d=function(t){if(~l.indexOf(t.origin))try{var i=e.parseJSON(t.data);i.id==h&&p(i.status,i.statusText,i.response)}catch(t){p(0,t.message)}},p=t[h]=function(i,n,a){s.readyState=4,s.responseText=a,s.end(i,n),e.event.off(t,"message",d),t[h]=o=m=t[c]=null};s.xhr.abort=function(){try{m.stop?m.stop():m.contentWindow.stop?m.contentWindow.stop():m.contentWindow.document.execCommand("Stop")}catch(t){}p(0,"abort")},e.event.on(t,"message",d),t[c]=function(){try{var t=m.contentWindow,i=t.document,n=t.result||e.parseJSON(i.body.innerHTML);p(n.status,n.statusText,n.response)}catch(t){e.log("[transport.onload]",t)}},(o=n.createElement("div")).innerHTML='<form target="'+h+'" action="'+l+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+h+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(u&&i.url.indexOf("=?")<0?'<input value="'+h+'" name="'+u+'" type="hidden"/>':"")+"</form>";var f=o.getElementsByTagName("form")[0],m=o.getElementsByTagName("iframe")[0];f.appendChild(a),e.log(f.parentNode.innerHTML),n.body.appendChild(o),s.xhr.node=o,s.readyState=2;try{f.submit()}catch(t){e.log("iframe.error: "+t)}f=null}else{if(l=l.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void e.log("Error: already aborted");if(o=s.xhr=e.getXHR(),a.params&&(l+=(l.indexOf("?")<0?"?":"&")+a.params.join("&")),o.open(i.uploadMethod||"POST",l,!0),"boolean"==typeof i.uploadCredentials?o.withCredentials=i.uploadCredentials?"true":null:e.withCredentials&&(o.withCredentials="true"),i.headers&&i.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.each(i.headers,(function(t,e){o.setRequestHeader(e,t)})),i._chunked){o.upload&&o.upload.addEventListener("progress",e.throttle((function(t){a.retry||i.progress({type:t.type,total:a.size,loaded:a.start+t.loaded,totalSize:a.size},s,i)}),100),!1),o.onreadystatechange=function(){var t=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var n in r)s["response"+n]=o["response"+n];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(e.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++a.retry<=i.chunkUploadRetry){var h=o.status?0:e.chunkNetworkDownRetryTimeout;i.pause(a.file,i),e.log("X-Last-Known-Byte: "+t),t?a.end=t:(a.end=a.start-1,416==o.status&&(a.end=a.end-i.chunkSize)),setTimeout((function(){s._send(i,a)}),h)}else s.end(o.status);else a.retry=0,a.end==a.size-1?s.end(o.status):(e.log("X-Last-Known-Byte: "+t),t&&(a.end=t),a.file.FileAPIReadPosition=a.end,setTimeout((function(){s._send(i,a)}),0));o=null}},a.start=a.end+1,a.end=Math.max(Math.min(a.start+i.chunkSize,a.size)-1,a.start);var g=a.file,v=(g.slice||g.mozSlice||g.webkitSlice).call(g,a.start,a.end+1);a.size&&!v.size?setTimeout((function(){s.end(-1)})):(o.setRequestHeader("Content-Range","bytes "+a.start+"-"+a.end+"/"+a.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(a.name)),o.setRequestHeader("Content-Type",a.type||"application/octet-stream"),o.send(v)),g=v=null}else if(o.upload&&o.upload.addEventListener("progress",e.throttle((function(t){i.progress(t,s,i)}),100),!1),o.onreadystatechange=function(){if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var t in r)s["response"+t]=o["response"+t];if(o.onreadystatechange=null,!o.status||o.status>201)if(e.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(i.retry||0)<i.uploadRetry){i.retry=(i.retry||0)+1;var n=e.networkDownRetryTimeout;i.pause(i.file,i),setTimeout((function(){s._send(i,a)}),n)}else s.end(o.status);else s.end(o.status);o=null}},e.isArray(a)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+e.expando);var y=a.join("")+"--_"+e.expando+"--";if(o.sendAsBinary)o.sendAsBinary(y);else{var w=Array.prototype.map.call(y,(function(t){return 255&t.charCodeAt(0)}));o.send(new Uint8Array(w).buffer)}}else o.send(a)}}},e.XHR=a}(window,FileAPI),function(t,e){"use strict";var i=t.URL||t.webkitURL,n=t.document,a=t.navigator,r=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia,o=!!r;e.support.media=o;var s,h,c,l,u=function(t){this.video=t};u.prototype={isActive:function(){return!!this._active},start:function(t){var o,s,h=this,c=h.video,l=function(e){h._active=!e,clearTimeout(s),clearTimeout(o),t&&t(e,h)};r.call(a,{video:!0},(function(t){h.stream=t;try{c.src=i.createObjectURL(t)}catch(e){c.srcObject=t}o=setInterval((function(){(function(t){var i,a=n.createElement("canvas"),r=!1;try{(i=a.getContext("2d")).drawImage(t,0,0,1,1),r=255!=i.getImageData(0,0,1,1).data[4]}catch(t){e.log("[FileAPI.Camera] detectVideoSignal:",t)}return r})(c)&&l(null)}),1e3),s=setTimeout((function(){l("timeout")}),5e3),c.play()}),l)},stop:function(){try{this._active=!1,this.video.pause();try{this.stream.stop()}catch(t){e.each(this.stream.getTracks(),(function(t){t.stop()}))}this.stream=null}catch(t){e.log("[FileAPI.Camera] stop:",t)}},shot:function(){return new d(this.video)}},u.get=function(t){return new u(t.firstChild)},u.publish=function(i,a,r){"function"==typeof a&&(r=a,a={}),a=e.extend({},{width:"100%",height:"100%",start:!0},a),i.jquery&&(i=i[0]);var s=function(t){if(t)r(t);else{var e=u.get(i);a.start?e.start(r):r(null,e)}};if(i.style.width=p(a.width),i.style.height=p(a.height),e.html5&&o&&!e.insecureChrome){var h=n.createElement("video");h.style.width=p(a.width),h.style.height=p(a.height),t.jQuery?jQuery(i).empty():i.innerHTML="",i.appendChild(h),s()}else u.fallback(i,a,s)},u.fallback=function(t,e,i){i("not_support_camera")},u.checkAlreadyCaptured=(h=a.mediaDevices,c=t.MediaStreamTrack,l=a.enumerateDevices,s=h&&h.enumerateDevices?function(t){h.enumerateDevices().then(t)}:c&&c.getSources?c.getSources.bind(c):l?l.bind(a):function(t){t([])},function(t){s((function(e){var i=e.some((function(t){return("videoinput"===t.kind||"video"===t.kind)&&t.label}));t(i)}))});var d=function(t){var i=t.nodeName?e.Image.toCanvas(t):t,n=e.Image(i);return n.type="image/png",n.width=i.width,n.height=i.height,n.size=i.width*i.height*4,n};function p(t){return t>=0?t+"px":t}u.Shot=d,e.Camera=u}(window,FileAPI),function(t,e,i){"use strict";var n=t.document,a=t.location,r=t.navigator,o=i.each;i.support.flash=function(){var e=r.mimeTypes,n=!1;if(r.plugins&&"object"==typeof r.plugins["Shockwave Flash"])n=r.plugins["Shockwave Flash"].description&&!(e&&e["application/x-shockwave-flash"]&&!e["application/x-shockwave-flash"].enabledPlugin);else try{n=!(!t.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){i.log("Flash -- does not supported.")}return n&&/^file:/i.test(a)&&i.log("[warn] Flash does not work on `file:` protocol."),n}(),i.support.flash&&(!i.html5||!i.support.html5||i.cors&&!i.support.cors||i.media&&!i.support.media||i.insecureChrome)&&function(){var s=i.uid(),h=0,c={},l=/^https?:/i,u={_fn:{},init:function(){var t=n.body&&n.body.firstChild;if(t)do{if(1==t.nodeType){i.log("FlashAPI.state: awaiting");var e=n.createElement("div");return e.id="_"+s,p(e,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:"2147483647"}),t.parentNode.insertBefore(e,t),void u.publish(e,s)}}while(t=t.nextSibling);h<10&&setTimeout(u.init,50*++h)},publish:function(t,e,n){n=n||{},t.innerHTML=d({id:e,src:y(i.flashUrl,"r="+i.version),wmode:n.camera?"":"transparent",flashvars:"callback="+(n.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+e+"&storeKey="+r.userAgent.match(/\d/gi).join("")+"_"+i.version+(u.isReady||(i.pingUrl?"&ping="+i.pingUrl:""))+"&timeout="+i.flashAbortTimeout+(n.camera?"&useCamera="+y(i.flashWebcamUrl):"")+"&debug="+(i.debug?"1":"")})},ready:function(){i.log("FlashAPI.state: ready"),u.ready=i.F,u.isReady=!0,u.patch(),u.patchCamera&&u.patchCamera(),i.event.on(n,"mouseover",u.mouseover),i.event.on(n,"click",(function(t){u.mouseover(t)&&(t.preventDefault?t.preventDefault():t.returnValue=!0)}))},getEl:function(){return n.getElementById("_"+s)},getWrapper:function(t){do{if(/js-fileapi-wrapper/.test(t.className))return t}while((t=t.parentNode)&&t!==n.body)},mouseover:function(e){var a=i.event.fix(e).target;if(/input/i.test(a.nodeName)&&"file"==a.type&&!a.disabled){var r=a.getAttribute(s),o=u.getWrapper(a);if(i.multiFlash){if("i"==r||"r"==r)return!1;if("p"!=r){a.setAttribute(s,"i");var h=n.createElement("div");if(!o)return void i.log("[err] FlashAPI.mouseover: js-fileapi-wrapper not found");p(h,{top:0,left:0,width:a.offsetWidth,height:a.offsetHeight,zIndex:"2147483647",position:"absolute"}),o.appendChild(h),u.publish(h,i.uid()),a.setAttribute(s,"p")}return!0}if(o){var c=function(e){var i=e.getBoundingClientRect(),a=n.body,r=(e&&e.ownerDocument).documentElement;return{top:i.top+(t.pageYOffset||r.scrollTop)-(r.clientTop||a.clientTop||0),left:i.left+(t.pageXOffset||r.scrollLeft)-(r.clientLeft||a.clientLeft||0),width:i.right-i.left,height:i.bottom-i.top}}(o);p(u.getEl(),c),u.curInp=a}}else/object|embed/i.test(a.nodeName)||p(u.getEl(),{top:1,left:1,width:5,height:5})},onEvent:function(t){var e=t.type;if("ready"==e){try{u.getInput(t.flashId).setAttribute(s,"r")}catch(t){}return u.ready(),setTimeout((function(){u.mouseenter(t)}),50),!0}"ping"===e?i.log("(flash -> js).ping:",[t.status,t.savedStatus],t.error):"log"===e?i.log("(flash -> js).log:",t.target):e in u&&setTimeout((function(){i.log("FlashAPI.event."+t.type+":",t),u[e](t)}),1)},mouseenter:function(t){var e=u.getInput(t.flashId);if(e){u.cmd(t,"multiple",null!=e.getAttribute("multiple"));var n=[],a={};o((e.getAttribute("accept")||"").split(/,\s*/),(function(t){i.accept[t]&&o(i.accept[t].split(" "),(function(t){a[t]=1}))})),o(a,(function(t,e){n.push(e)})),u.cmd(t,"accept",n.length?n.join(",")+","+n.join(",").toUpperCase():"*")}},get:function(e){return n[e]||t[e]||n.embeds[e]},getInput:function(t){if(!i.multiFlash)return u.curInp;try{var e=u.getWrapper(u.get(t));if(e)return e.getElementsByTagName("input")[0]}catch(e){i.log('[err] Can not find "input" by flashId:',t,e)}},select:function(t){var a,r=u.getInput(t.flashId),s=i.uid(r),h=t.target.files;o(h,(function(t){i.checkFileObj(t)})),c[s]=h,n.createEvent?((a=n.createEvent("Event")).files=h,a.initEvent("change",!0,!0),r.dispatchEvent(a)):e?e(r).trigger({type:"change",files:h}):((a=n.createEventObject()).files=h,r.fireEvent("onchange",a))},cmd:function(t,e,n,a){try{return i.log("(js -> flash)."+e+":",n),u.get(t.flashId||t).cmd(e,n)}catch(r){i.log("(js -> flash).onError:",r.toString()),a||setTimeout((function(){u.cmd(t,e,n,!0)}),50)}},patch:function(){i.flashEngine=!0,f(i,{getFiles:function(t,e,n){if(n)return i.filterFiles(i.getFiles(t),e,n),null;var a=i.isArray(t)?t:c[i.uid(t.target||t.srcElement||t)];return a?(e&&(e=i.getFilesFilter(e),a=i.filter(a,(function(t){return e.test(t.name)}))),a):this.parent.apply(this,arguments)},getInfo:function(t,e){if(m(t))this.parent.apply(this,arguments);else if(t.isShot)e(null,t.info={width:t.width,height:t.height});else{if(!t.__info){var n=t.__info=i.defer();u.cmd(t,"getFileInfo",{id:t.id,callback:g((function e(i,a){v(e),n.resolve(i,t.info=a)}))})}t.__info.then(e)}}}),i.support.transform=!0,i.Image&&f(i.Image.prototype,{get:function(t,e){return this.set({scaleMode:e||"noScale"}),this.parent(t)},_load:function(t,e){if(i.log("FlashAPI.Image._load:",t),m(t))this.parent.apply(this,arguments);else{var n=this;i.getInfo(t,(function(i){e.call(n,i,t)}))}},_apply:function(t,e){if(i.log("FlashAPI.Image._apply:",t),m(t))this.parent.apply(this,arguments);else{var n=this.getMatrix(t.info),a=e;u.cmd(t,"imageTransform",{id:t.id,matrix:n,callback:g((function r(o,s){i.log("FlashAPI.Image._apply.callback:",o),v(r),o?a(o):i.support.html5||i.support.dataURI&&!(s.length>3e4)?(n.filter&&(a=function(t,a){t?e(t):i.Image.applyFilter(a,n.filter,(function(){e(t,this.canvas)}))}),i.newImage("data:"+t.type+";base64,"+s,a)):w({width:n.deg%180?n.dh:n.dw,height:n.deg%180?n.dw:n.dh,scale:n.scaleMode},s,a)}))})}},toData:function(t){var e=this.file,n=e.info,a=this.getMatrix(n);i.log("FlashAPI.Image.toData"),m(e)?this.parent.apply(this,arguments):("auto"==a.deg&&(a.deg=i.Image.exifOrientation[n&&n.exif&&n.exif.Orientation]||0),t.call(this,!e.info,{id:e.id,flashId:e.flashId,name:e.name,type:e.type,matrix:a}))}}),i.Image&&f(i.Image,{fromDataURL:function(t,e,n){!i.support.dataURI||t.length>3e4?w(i.extend({scale:"exactFit"},e),t.replace(/^data:[^,]+,/,""),(function(t,e){n(e)})):this.parent(t,e,n)}}),f(i.Form.prototype,{toData:function(t){for(var e=this.items,n=e.length;n--;)if(e[n].file&&m(e[n].blob))return this.parent.apply(this,arguments);i.log("FlashAPI.Form.toData"),t(e)}}),f(i.XHR.prototype,{_send:function(t,e){if(e.nodeName||e.append&&i.support.html5||i.isArray(e)&&"string"==typeof e[0])return this.parent.apply(this,arguments);var n,a,r={},h={},c=this;if(o(e,(function(t){t.file?(h[t.name]=t=b(t.blob),a=t.id,n=t.flashId):r[t.name]=t.blob})),a||(n=s),!n)return i.log("[err] FlashAPI._send: flashId -- undefined"),this.parent.apply(this,arguments);i.log("FlashAPI.XHR._send: "+n+" -> "+a),c.xhr={headers:{},abort:function(){u.cmd(n,"abort",{id:a})},getResponseHeader:function(t){return this.headers[t]},getAllResponseHeaders:function(){return this.headers}};var l=i.queue((function(){u.cmd(n,"upload",{url:y(t.url.replace(/([a-z]+)=(\?)&?/i,"")),data:r,files:a?h:null,headers:t.headers||{},callback:g((function e(n){var a=n.type,r=n.result;i.log("FlashAPI.upload."+a),"progress"==a?(n.loaded=Math.min(n.loaded,n.total),n.lengthComputable=!0,t.progress(n)):"complete"==a?(v(e),"string"==typeof r&&(c.responseText=r.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),c.end(n.status||200)):"abort"!=a&&"error"!=a||(c.end(n.status||0,n.message),v(e))}))})}));o(h,(function(t){l.inc(),i.getInfo(t,l.next)})),l.check()}})}};function d(t){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(t.width||"100%")+'" height="'+(t.height||"100%")+'"><param name="movie" value="#src#" /><param name="flashvars" value="#flashvars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="menu" value="false" /><param name="wmode" value="#wmode#" /><embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(t.width||"100%")+'" height="'+(t.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>').replace(/#(\w+)#/gi,(function(e,i){return t[i]}))}function p(t,e){var i,n;if(t&&t.style)for(i in e){"number"==typeof(n=e[i])&&(n+="px");try{t.style[i]=n}catch(t){}}}function f(t,e){o(e,(function(e,i){var n=t[i];t[i]=function(){return this.parent=n,e.apply(this,arguments)}}))}function m(t){return t&&!t.flashId}function g(t){var e=t.wid=i.uid();return u._fn[e]=t,"FileAPI.Flash._fn."+e}function v(t){try{u._fn[t.wid]=null,delete u._fn[t.wid]}catch(t){}}function y(t,e){if(!l.test(t)){if(/^\.\//.test(t)||"/"!=t.charAt(0)){var i=a.pathname;t=((i=i.substr(0,i.lastIndexOf("/")))+"/"+t).replace("/./","/")}"//"!=t.substr(0,2)&&(t="//"+a.host+t),l.test(t)||(t=a.protocol+t)}return e&&(t+=(/\?/.test(t)?"&":"?")+e),t}function w(t,e,a){var r,o=i.uid(),s=n.createElement("div"),h=10;for(r in t)s.setAttribute(r,t[r]),s[r]=t[r];p(s,t),t.width="100%",t.height="100%",s.innerHTML=d(i.extend({id:o,src:y(i.flashImageUrl,"r="+i.uid()),wmode:"opaque",flashvars:"scale="+t.scale+"&callback="+g((function t(){return v(t),--h>0&&function(){try{u.get(o).setImage(e)}catch(t){i.log('[err] FlashAPI.Preview.setImage -- can not set "base64":',t)}}(),!0}))},t)),a(!1,s),s=null}function b(t){return{id:t.id,name:t.name,matrix:t.matrix,flashId:t.flashId}}i.Flash=u,i.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",(function(t,e){i.support.dataURI=!(1!=e.width||1!=e.height),u.init()}))}()}(window,window.jQuery,FileAPI),function(t,e,i){"use strict";var n=i.each,a=[];!i.support.flash||!i.media||i.support.media&&i.html5&&!i.insecureChrome||function(){function t(t){var e=t.wid=i.uid();return i.Flash._fn[e]=t,"FileAPI.Flash._fn."+e}function e(t){try{i.Flash._fn[t.wid]=null,delete i.Flash._fn[t.wid]}catch(t){}}var r=i.Flash;i.extend(i.Flash,{patchCamera:function(){i.Camera.fallback=function(n,a,o){var s=i.uid();i.log("FlashAPI.Camera.publish: "+s),r.publish(n,s,i.extend(a,{camera:!0,onEvent:t((function t(n){"camera"===n.type&&(e(t),n.error?(i.log("FlashAPI.Camera.publish.error: "+n.error),o(n.error)):(i.log("FlashAPI.Camera.publish.success: "+s),o(null)))}))}))},n(a,(function(t){i.Camera.fallback.apply(i.Camera,t)})),a=[],i.extend(i.Camera.prototype,{_id:function(){return this.video.id},start:function(n){var a=this;r.cmd(this._id(),"camera.on",{callback:t((function t(r){e(t),r.error?(i.log("FlashAPI.camera.on.error: "+r.error),n(r.error,a)):(i.log("FlashAPI.camera.on.success: "+a._id()),a._active=!0,n(null,a))}))})},stop:function(){this._active=!1,r.cmd(this._id(),"camera.off")},shot:function(){i.log("FlashAPI.Camera.shot:",this._id());var t=i.Flash.cmd(this._id(),"shot",{});return t.type="image/png",t.flashId=this._id(),t.isShot=!0,new i.Camera.Shot(t)}})}}),i.Camera.fallback=function(){a.push(arguments)}}()}(window,window.jQuery,FileAPI),void 0===(i=function(){return FileAPI}.apply(e,[]))||(t.exports=i)},53914:function(t,e,i){"use strict";i.d(e,{Z:function(){return y}});var n=i(93122),a=i(93221),r=function(){return a.Z.Date.now()},o=/\s/;var s=function(t){for(var e=t.length;e--&&o.test(t.charAt(e)););return e},h=/^\s+/;var c=function(t){return t?t.slice(0,s(t)+1).replace(h,""):t},l=i(22758),u=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,f=parseInt;var m=function(t){if("number"==typeof t)return t;if((0,l.Z)(t))return NaN;if((0,n.Z)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=(0,n.Z)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=c(t);var i=d.test(t);return i||p.test(t)?f(t.slice(2),i?2:8):u.test(t)?NaN:+t},g=Math.max,v=Math.min;var y=function(t,e,i){var a,o,s,h,c,l,u=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=a,n=o;return a=o=void 0,u=e,h=t.apply(n,i)}function w(t){return u=t,c=setTimeout(x,e),d?y(t):h}function b(t){var i=t-l;return void 0===l||i>=e||i<0||p&&t-u>=s}function x(){var t=r();if(b(t))return A(t);c=setTimeout(x,function(t){var i=e-(t-l);return p?v(i,s-(t-u)):i}(t))}function A(t){return c=void 0,f&&a?y(t):(a=o=void 0,h)}function C(){var t=r(),i=b(t);if(a=arguments,o=this,l=t,i){if(void 0===c)return w(l);if(p)return clearTimeout(c),c=setTimeout(x,e),y(l)}return void 0===c&&(c=setTimeout(x,e)),h}return e=m(e)||0,(0,n.Z)(i)&&(d=!!i.leading,s=(p="maxWait"in i)?g(m(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f),C.cancel=function(){void 0!==c&&clearTimeout(c),u=0,a=l=o=c=void 0},C.flush=function(){return void 0===c?h:A(r())},C}},88744:function(t,e,i){"use strict";var n=i(53914),a=i(93122);e.Z=function(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return(0,a.Z)(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),(0,n.Z)(t,e,{leading:r,maxWait:e,trailing:o})}}}]);